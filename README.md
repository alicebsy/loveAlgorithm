# 💕 Love Algorithm - 알고리즘보다 어려운 건 사랑이었다

> "연애? 그런 비효율적인 프로세스는 내 메모리에 할당하지 않는다."

React + TypeScript + Vite로 구현된 몰입형 비주얼 노벨 게임입니다.  
코딩에만 집중하려던 개발자가 KAIST 몰입캠프에서 만난 사람들과의 관계를 통해 성장하는 이야기를 담았습니다.

---

## 🎮 프로젝트 소개

**[Love Algorithm]**은 단순한 연애 시뮬레이션이 아닙니다.

주인공은 코딩 실력 향상만을 목표로 KAIST 몰입캠프에 참가합니다.  
"연애는 비효율적인 프로세스"라고 생각하던 그였지만, 캠프에서 만난 사람들과의 관계를 통해  
**알고리즘보다 복잡한 것이 있다는 걸** 깨닫게 됩니다.

선택에 따라 달라지는 호감도 시스템과 풍부한 스토리로,  
당신만의 **Love Algorithm**을 완성해보세요! 💝

### 🌐 라이브 데모

게임을 바로 플레이해보세요!

👉 **[https://love-algorithm-seven.vercel.app/](https://love-algorithm-seven.vercel.app/)**

배포된 사이트에서 바로 게임을 즐길 수 있습니다!

---

## 📖 스토리

### Chapter 1: init() - 시작

주인공은 KAIST 몰입캠프 합격 메일을 받습니다.  
"이번 방학은 헛되이 보내지 않겠어. 내 목표는 오로지 하나. 코딩 실력 향상."

하지만 캠프 첫날, 학생증을 주워준 **한지수**를 만나며 예상치 못한 상황이 펼쳐집니다.  
"이 친화력은 뭐지? 혹시... 나한테 관심 있나?"  
그의 착각은 곧 깨지지만, 이미 그의 메모리에는 새로운 프로세스가 할당되기 시작했습니다.

### Chapter 2: Conflict - 새로운 파트너

2주차, 팀이 리셋되고 새로운 파트너 **천세라**를 만납니다.  
포스텍에서 온 그녀는 "1주차 금픽? 뭐 운이 좋았겠지"라며 도전장을 내밉니다.

성격이 보통이 아니라는 소문대로, 그녀와의 협업은 쉽지 않습니다.  
하지만 함께 프로젝트를 완성해나가며 서로를 이해하게 되는데...

### Chapter 3: Resolution - 선택의 시간

3주차, 캠프가 끝나가고 관계는 더욱 복잡해집니다.  
**도희**, **지수**, **세라**... 각자와의 관계는 선택에 따라 달라집니다.

당신의 선택이 스토리의 결말을 결정합니다.  
어떤 알고리즘으로 이 관계를 해결할까요?

### Chapter 4: Final Release - 최종 선택

4주차, 마지막 강연이 시작됩니다.  
"스타트업의 미래와 AI"라는 주제의 강연이지만, 이미 내용은 중요하지 않다.

**앞줄의 세라**는 열정적인 High Performance 모드로 질문을 대신해달라고 부탁하고,  
**뒷줄의 도희**는 안정적인 Power Saving 모드로 편안한 자리를 제안합니다.

나의 리소스인 몸은 하나다. 어디에 Allocation해야 할까?

그리고 반팅 제안이 들어옵니다.  
"1분반이랑 반팅하실 분 (남자) (0/3)"  
나간다면? 안 나간다면? 이 선택이 모든 관계를 결정합니다.

마지막 밤, 졸업식이 끝나고 모두가 모여 앉은 자리.  
촛불 하나만 켜진 어둠 속에서, 내 옆자리... Next Pointer를 누구에게 할당할 것인가.

**도희**, **지수**, **세라** 중 한 명을 선택하면,  
그녀와의 마지막 대화가 펼쳐집니다.

호감도가 충분하다면 → **Happy Ending** 💕  
호감도가 부족하다면 → **Bad Ending** 💔

---

## 👥 등장인물

### 🎯 주인공: 당신의 이름 (Hero)
- **성격**: 코딩에만 집중하는 개발자. 연애는 비효율적이라고 생각
- **목표**: 코딩 실력 향상
- **특징**: 모든 것을 프로그래밍 용어로 비유하는 습관
- **명대사**: "연애? 그런 비효율적인 프로세스는 내 메모리에 할당하지 않는다."

### 💜 도희 (Dohee)
- **성격**: 차분하고 신중한 성격. 말이 통하는 사람을 좋아함
- **관계**: 1주차 파트너로 만남. 술게임을 통해 친해짐
- **특징**: 호감도에 따라 관계가 크게 달라짐
- **이벤트**: 편의점에서의 대화, 술게임, 밤 산책, 강연장 뒷줄, 졸업식 고백 등
- **엔딩**: "가장 안정적인 서버처럼, 언제나 네 곁에 있을게."

### 🌸 지수 (Jisoo)
- **성격**: 밝고 활발한 성격. 모든 사람에게 친절함
- **관계**: 첫 만남에서 학생증을 주워줌. 착각의 시작
- **특징**: Broadcast 방식의 친화력 (모두에게 친절)
- **이벤트**: 학생증 반환, 카이마루 앞에서의 만남, 졸업식 고백 등
- **엔딩**: "너라는 에러는 없어. 넌 내 최고의 Feature야."

### 🔥 세라 (Sera)
- **성격**: 도전적이고 자신감 넘치는 성격. 포스텍 출신
- **관계**: 2주차 파트너. 처음엔 경쟁 관계
- **특징**: 실력에 대한 자부심이 강함. 하지만 부끄러움도 많음
- **이벤트**: 첫 만남, 프로젝트 협업, 연못에서의 대화, 강연장 앞줄, 졸업식 고백 등
- **엔딩**: "내 코드 평생 리팩토링해 줄 사람, 너밖에 없어."

### 👨‍💼 성준 (Manager)
- **역할**: 몰입캠프 운영진
- **특징**: 카카오톡으로 공지사항 전달

---

## ✨ 핵심 기능 (Key Features)

### 1. 📊 동적 호감도 시스템
```
도희 호감도: 50 → 선택에 따라 → 70 (상승) 또는 30 (하락)
지수 호감도: 40 → 선택에 따라 → 60 (상승) 또는 20 (하락)
세라 호감도: 30 → 선택에 따라 → 50 (상승) 또는 10 (하락)
```

- **선택의 중요성**: 모든 선택이 캐릭터와의 관계에 영향을 미칩니다
- **시각적 피드백**: 호감도 변화가 즉시 반영됩니다
- **다양한 엔딩**: 호감도에 따라 다른 스토리 분기
- **최종 선택**: Chapter 4에서 누구를 선택하느냐에 따라 엔딩이 결정됩니다

### 2. 🎭 풍부한 대화 형식
- **일반 대화**: 캐릭터 간의 자연스러운 대화
- **나레이션**: 스토리 진행을 돕는 설명
- **생각 (Think)**: 주인공의 내적 독백
- **카카오톡**: 실제 카카오톡 UI로 대화
- **시스템 메시지**: 게임 상태 알림
- **입력 모드**: 주인공 이름 입력 등

### 3. 🎮 미니게임 시스템
- 스토리 중간에 등장하는 미니게임
- 게임 결과에 따라 스토리 분기
- 승리/패배에 따른 다른 씬으로 이동

### 4. 💾 저장/불러오기
- **서버 연동**: 게임 진행 상태를 서버에 저장
- **다중 슬롯**: 여러 저장 슬롯 지원
- **자동 저장**: 중요한 선택지에서 자동 저장

### 5. 🎨 풍부한 미디어
- **배경 이미지**: 각 장면별 고유 배경
- **캐릭터 이미지**: 다양한 표정과 포즈
- **BGM**: 장면에 맞는 배경음악
- **효과음**: 타자기, 카카오톡 알림 등

### 6. 🔐 사용자 인증
- **이메일 회원가입/로그인**: 기본 계정 시스템
- **Google OAuth**: 구글 계정으로 간편 로그인
- **세션 관리**: 자동 로그인 지원

### 7. 🎯 다양한 엔딩
- **Happy Ending**: 호감도가 충분할 때 각 캐릭터와의 달콤한 엔딩
- **Bad Ending**: 호감도가 부족할 때 거절당하는 엔딩
- **반팅 엔딩**: 반팅에 나가면 모든 관계가 망가지는 엔딩

---

## 🛠 기술 스택 (Tech Stack)

### Environment
- **Node.js** 18+
- **npm** / **yarn**
- **Git** / **GitHub**

### Frontend Development
- **React 19.2** - 최신 React 기능 활용
- **TypeScript** - 타입 안정성 보장
- **Vite 7.3** - 빠른 개발 서버 및 빌드
- **Zustand 5.0** - 경량 상태 관리
- **Styled Components 6.1** - CSS-in-JS 스타일링

### Backend
- **Spring Boot** - Java 백엔드 프레임워크
- **MySQL** - 데이터베이스
- **JWT** - 인증 토큰

### Deployment
- **Vercel** - 프론트엔드 배포 (선택)
- **AWS EC2** - 백엔드 서버
- **Nginx** - 리버스 프록시 및 정적 파일 서빙
- **Let's Encrypt** - SSL 인증서

---

## 🚀 시작하기

### 필수 요구사항

- **Node.js** 18 이상
- **npm** 또는 **yarn**
- (선택) 백엔드 서버 실행 중

### 설치

```bash
# 저장소 클론
git clone <repository-url>
cd loveAlgorithm

# 의존성 설치
npm install
```

### 개발 서버 실행

```bash
npm run dev
```

브라우저에서 `http://localhost:5175`로 접속하세요.

### 빌드

```bash
# 프로덕션 빌드
npm run build

# 빌드 결과 미리보기
npm run preview
```

---

## ⚙️ 환경 설정

프로젝트 루트에 `.env` 파일을 생성하고 다음 설정을 추가하세요:

```env
# API 모드 설정
# mock: 모킹 데이터 사용 (백엔드 없이 테스트)
# backend: 실제 백엔드 API 사용
VITE_API_MODE=mock

# 백엔드 API 기본 URL (백엔드 모드일 때 사용)
VITE_API_BASE_URL=https://lovealgorithmgame.site/api

# Google OAuth 클라이언트 ID (선택사항)
VITE_GOOGLE_CLIENT_ID=your_google_client_id_here
```

### 모킹 모드 (기본값)
- `VITE_API_MODE=mock`로 설정
- 백엔드 없이도 모든 기능 테스트 가능
- 로컬 스크립트 데이터를 사용하여 프론트엔드 동작 확인
- **추천**: 개발 초기 단계에서 사용

### 백엔드 모드
- `VITE_API_MODE=backend`로 설정
- 실제 Spring Boot 백엔드와 통신
- `VITE_API_BASE_URL`에 백엔드 URL 설정
- 사용자 인증, 저장/불러오기 등 서버 기능 사용 가능
- **추천**: 프로덕션 배포 시 사용

---

## 📂 폴더 구조 (Directory Structure)

```
loveAlgorithm/
├── public/                 # 정적 파일 (이미지, 사운드)
│   ├── backgrounds/       # 배경 이미지 (도훈의 방, 강의실, 연못 등)
│   ├── characters/        # 캐릭터 이미지 (도희, 지수, 세라 등)
│   ├── icon/             # 아이콘 이미지
│   └── sounds/            # BGM 및 효과음
│       ├── bgm/           # 배경음악
│       └── sfx/           # 효과음
├── src/
│   ├── components/        # React 컴포넌트
│   │   ├── screens/       # 화면 컴포넌트
│   │   │   ├── StartScreen.tsx        # 시작 화면
│   │   │   ├── LoginScreen.tsx        # 로그인 화면
│   │   │   ├── RegisterScreen.tsx     # 회원가입 화면
│   │   │   ├── GameScreen.tsx         # 메인 게임 화면
│   │   │   ├── SaveLoadScreen.tsx     # 저장/불러오기 화면
│   │   │   ├── SettingsScreen.tsx     # 설정 화면
│   │   │   └── DebugScreen.tsx        # 디버그 화면
│   │   └── ui/            # UI 컴포넌트
│   │       ├── CharacterDisplay.tsx   # 캐릭터 이미지 표시
│   │       ├── DialogueBox.tsx       # 대화 박스
│   │       ├── ControlPanel.tsx      # 컨트롤 패널
│   │       ├── MiniGameModal.tsx      # 미니게임 모달
│   │       ├── KakaoTalkModal.tsx     # 카카오톡 UI
│   │       └── Toast.tsx             # 토스트 알림
│   ├── services/          # API 및 서비스
│   │   ├── api.ts         # API 클라이언트 (백엔드 통신)
│   │   ├── gameDataService.ts  # 게임 데이터 서비스
│   │   ├── scenarioService.ts  # 시나리오 서비스
│   │   ├── scriptService.ts    # 스크립트 서비스
│   │   ├── soundService.ts     # 사운드 서비스
│   │   ├── imageService.ts     # 이미지 서비스
│   │   └── mockData.ts         # 모킹 데이터
│   ├── store/             # 상태 관리
│   │   └── gameStore.ts    # Zustand 스토어 (게임 상태, 호감도 등)
│   ├── hooks/              # 커스텀 훅
│   │   ├── useGameEngine.ts    # 게임 엔진 로직
│   │   ├── useHotkeys.ts       # 키보드 단축키
│   │   └── useScriptLoader.ts  # 스크립트 로더
│   ├── types/              # TypeScript 타입 정의
│   │   └── game.types.ts   # 게임 관련 타입
│   ├── data/               # 로컬 데이터
│   │   ├── script.ts        # 게임 스크립트 (모든 씬 데이터)
│   │   └── constants.ts    # 상수 정의 (캐릭터 ID, 배경 ID 등)
│   └── utils/              # 유틸리티 함수
│       ├── nameUtils.ts    # 이름 처리 유틸
│       └── storage.ts       # 로컬 스토리지 유틸
├── docs/                   # 문서
│   ├── api-spec.md         # API 명세서
│   └── api-spec-updated.md # 업데이트된 API 명세서
├── .env                    # 환경 변수 (로컬)
├── package.json
├── vite.config.ts
└── README.md
```

---

## 📦 배포 가이드

### 프론트엔드 배포

#### 옵션 1: Vercel 배포 (권장 - 가장 쉬움) ⭐

**현재 배포 URL**: [https://love-algorithm-seven.vercel.app/](https://love-algorithm-seven.vercel.app/)

1. **빠른 배포**: `QUICK_DEPLOY.md` 참고 (5분 안에 배포)
2. **상세 가이드**: `VERCEL_DEPLOY.md` 참고

**장점:**
- 무료 호스팅
- 자동 배포 (Git push 시 자동 배포)
- HTTPS 자동 설정
- CDN 제공

#### 옵션 2: 같은 서버에 배포 (Nginx 사용)

1. **프론트엔드 빌드**
   ```bash
   npm run build
   ```

2. **서버에 파일 업로드**
   ```bash
   scp -r dist/* ubuntu@lovealgorithmgame.site:/var/www/lovealgorithmgame/
   ```

3. **Nginx 설정**
   - `NGINX_HTTPS_SETUP.md` 참고
   - `/etc/nginx/sites-available/default` 파일 수정

4. **Nginx 재시작**
   ```bash
   sudo nginx -t
   sudo systemctl restart nginx
   ```

### 백엔드 배포

1. **서버 설정**: `COMPLETE_SERVER_SETUP.md` 참고
2. **도메인 설정**: `DOMAIN_SETUP.md` 참고
3. **HTTPS 설정**: `NGINX_HTTPS_SETUP.md` 참고
4. **SSL 인증서**: Let's Encrypt 사용

### 전체 배포 가이드

더 자세한 배포 가이드는 다음 문서를 참고하세요:
- `DEPLOYMENT_GUIDE.md` - 다양한 플랫폼 배포 가이드
- `QUICK_DEPLOY.md` - 빠른 배포 가이드
- `VERCEL_DEPLOY.md` - Vercel 상세 가이드

---

## 📚 API 문서

백엔드 API 명세서는 다음 파일을 참고하세요:
- `docs/api-spec.md` - 기본 API 명세서
- `docs/api-spec-updated.md` - 업데이트된 API 명세서

### 주요 API 엔드포인트

- `GET /api/script` - 게임 스크립트 데이터 조회
- `GET /api/events` - 게임 이벤트 데이터 조회
- `GET /api/affection/{characterId}` - 캐릭터 호감도 조회
- `POST /api/affection/{characterId}` - 캐릭터 호감도 업데이트
- `POST /api/auth/login` - 로그인
- `POST /api/auth/register` - 회원가입
- `GET /api/save/slots` - 저장 슬롯 목록 조회
- `POST /api/save/slots` - 게임 진행 상태 저장
- `GET /api/save/slots/{slotId}` - 저장 슬롯 불러오기

---

## 🛠 개발 가이드

### 게임 스크립트 추가

게임 스크립트는 `src/data/script.ts` 파일에 정의되어 있습니다.  
백엔드 모드에서는 서버에서 스크립트를 가져옵니다.

새로운 씬을 추가하려면:

```typescript
'chapter1_scene10': {
  chapter_id: chapterId.chapter1,
  next_scene_id: 'chapter1_scene11',
  event: 10,
  scenario: [
    {
      script: '새로운 대사 내용',
      character_id: characterId.dohee,
      type: 'text',
      background_image_id: backgroundImageId.classroom,
      id: 'chapter1_scene10_0',
      index: 0,
    },
    // ...
  ],
}
```

### 새로운 화면 추가

1. `src/components/screens/` 디렉토리에 새 컴포넌트 생성
2. `src/App.tsx`에서 라우팅 추가
3. `src/store/gameStore.ts`에서 화면 상태 관리

### 상태 관리

게임 상태는 Zustand를 사용하여 관리됩니다. 주요 상태는 `src/store/gameStore.ts`에 정의되어 있습니다.

```typescript
import { useGameStore } from './store/gameStore';

// 게임 상태 접근
const { 
  currentSceneId, 
  currentDialogueIndex, 
  affections,
  heroName 
} = useGameStore();

// 상태 업데이트
const { 
  setCurrentScene, 
  proceedToNext,
  updateAffection 
} = useGameStore();

// 호감도 업데이트 예시
updateAffection('도희', 10); // 도희 호감도 +10
```

### 키보드 단축키

- `Space` 또는 `Enter`: 다음 대화로 진행
- `S`: 저장 화면 열기
- `L`: 불러오기 화면 열기
- `Esc`: 설정 화면 열기

---

## 🐛 문제 해결

### 백엔드 연결 실패

1. **환경 변수 확인**
   ```bash
   # .env 파일 확인
   cat .env
   ```

2. **백엔드 서버 상태 확인**
   ```bash
   curl https://lovealgorithmgame.site/api/health
   ```

3. **CORS 설정 확인**
   - 백엔드의 CORS 설정에 프론트엔드 도메인이 포함되어 있는지 확인

### 빌드 에러

1. **의존성 재설치**
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   ```

2. **TypeScript 타입 체크**
   ```bash
   npm run build
   ```

### 게임 스크립트 로드 실패

1. **모킹 모드 확인**: `VITE_API_MODE=mock`로 설정하여 로컬 데이터 사용
2. **네트워크 탭 확인**: 브라우저 개발자 도구에서 API 요청 상태 확인
3. **콘솔 로그 확인**: 에러 메시지 확인

### 이미지/사운드 로드 실패

1. **파일 경로 확인**: `public/` 디렉토리에 파일이 있는지 확인
2. **파일 이름 확인**: 대소문자 구분 확인
3. **브라우저 캐시**: 강력 새로고침 (Ctrl+Shift+R)

---

## 📝 추가 문서

- `BGM_ADD_GUIDE.md` - BGM 추가 가이드
- `SAVE_LOAD_GUIDE.md` - 저장/불러오기 기능 가이드
- `GOOGLE_LOGIN_SETUP.md` - Google OAuth 설정 가이드
- `SSH_CONNECTION_GUIDE.md` - SSH 연결 가이드

---

## 🎯 게임 플레이 팁

1. **선택을 신중하게**: 모든 선택이 호감도에 영향을 미칩니다
2. **저장 습관화**: 중요한 선택지 전에 저장하는 것을 권장합니다
3. **다양한 분기 탐험**: 여러 저장 슬롯을 사용하여 다른 엔딩을 경험해보세요
4. **캐릭터별 특성 이해**: 각 캐릭터의 성격을 이해하면 더 나은 선택을 할 수 있습니다
5. **Chapter 4 주의**: 반팅에 나가면 모든 관계가 망가집니다. 신중하게 선택하세요!
6. **호감도 관리**: 최종 선택 전까지 각 캐릭터의 호감도를 잘 관리해야 Happy Ending을 볼 수 있습니다

---

## 🎬 엔딩 가이드

### Happy Ending 조건
- 각 캐릭터의 호감도가 일정 수준 이상이어야 합니다
- Chapter 4에서 반팅에 나가지 않아야 합니다
- 최종 선택에서 해당 캐릭터를 선택해야 합니다

### Bad Ending
- 호감도가 부족하면 거절당하는 엔딩
- 반팅에 나가면 모든 관계가 망가지는 엔딩

### 엔딩 종류
- **도희 엔딩**: "가장 안정적인 서버처럼, 언제나 네 곁에 있을게."
- **지수 엔딩**: "너라는 에러는 없어. 넌 내 최고의 Feature야."
- **세라 엔딩**: "내 코드 평생 리팩토링해 줄 사람, 너밖에 없어."

---

## 👥 팀원 및 기여자

### 개발팀
- **박세윤** - 프론트엔드 개발 (React + TypeScript + Vite)
- **배서연** - 백엔드 개발 (Spring Boot + MySQL)

프로젝트에 기여해주신 모든 분들께 감사드립니다.

---

## 📄 라이선스

이 프로젝트는 개인 프로젝트입니다.

—

**문의사항이나 버그 리포트는 이슈로 등록해주세요!** 🐛

**당신만의 Love Algorithm을 완성하세요!** 💕